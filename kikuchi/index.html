



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.2">
    
    
      
        <title>Kikuchi - pycotem</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.30686662.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#7e57c2">
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Asap:300,400,400i,700|&display=fallback">
        <style>body,input{font-family:"Asap","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="deep-purple" data-md-color-accent="deep-purple">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#introduction" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="pycotem" class="md-header-nav__button md-logo">
          
            <img src="../images/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                pycotem
              </span>
              <span class="md-header-nav__topic">
                Kikuchi
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/mompiou/pycotem/" title="Go to repository" class="md-source" >
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      mompiou/pycotem
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../images/logo.png" width="26" height="51">
      
    </span>
   
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/mompiou/pycotem/" title="Go to repository" class="md-source" >
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      mompiou/pycotem
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../started/" title="Getting started" class="md-nav__link">
      Getting started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../diffraction/" title="Diffraction" class="md-nav__link">
      Diffraction
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
<!--    -->
<!--    -->
<!--      <label class="md-nav__link md-nav__link--active" for="__toc">-->
<!--        Kikuchi-->
<!--      </label>-->
<!--    -->
    <a href="./" title="Kikuchi" class="md-nav__link md-nav__link--active">
      Kikuchi
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#indexing-kikuchi-bands" title="Indexing Kikuchi bands" class="md-nav__link">
    Indexing Kikuchi bands
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#calibration" title="Calibration" class="md-nav__link">
    Calibration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#orientation" title="Orientation" class="md-nav__link">
    Orientation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interface" title="Interface" class="md-nav__link">
    Interface
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#procedure" title="Procedure" class="md-nav__link">
    Procedure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#refining-the-results" title="Refining the results" class="md-nav__link">
    Refining the results
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tilt-conditions" title="Tilt conditions" class="md-nav__link">
    Tilt conditions
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../stereoproj/" title="StereoProj" class="md-nav__link">
      StereoProj
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../interface/" title="Interface" class="md-nav__link">
      Interface
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../misorientation/" title="Misorientation" class="md-nav__link">
      Misorientation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../crystal/" title="Crystal" class="md-nav__link">
      Crystal
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ressources/" title="Further ressources" class="md-nav__link">
      Further ressources
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contribute/" title="About" class="md-nav__link">
      About
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#indexing-kikuchi-bands" title="Indexing Kikuchi bands" class="md-nav__link">
    Indexing Kikuchi bands
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#calibration" title="Calibration" class="md-nav__link">
    Calibration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#orientation" title="Orientation" class="md-nav__link">
    Orientation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interface" title="Interface" class="md-nav__link">
    Interface
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#procedure" title="Procedure" class="md-nav__link">
    Procedure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#refining-the-results" title="Refining the results" class="md-nav__link">
    Refining the results
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tilt-conditions" title="Tilt conditions" class="md-nav__link">
    Tilt conditions
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  
                
                
                  <h1>Kikuchi</h1>
                
                <p><code>kikuchi</code> allows to determine orientation from a kikuchi pattern.</p>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>Kikuchi lines result from inelastic scattering in a sufficiently thick crystal. Considering an electron beam entering the crystal, electron are scattered in different directions, but more likely in the forward direction. The electrons that are in Bragg conditions, i.e. forming an angle <span><span class="MathJax_Preview">\pm \theta_B</span><script type="math/tex">\pm \theta_B</script></span>, with an atomic plane will eventually be diffracted. Their wave vectors <span><span class="MathJax_Preview">\vec{k}_0</span><script type="math/tex">\vec{k}_0</script></span>, <span><span class="MathJax_Preview">\vec{k}'_0</span><script type="math/tex">\vec{k}'_0</script></span> are distributed in two <em>Kossel cones</em> of aperture <span><span class="MathJax_Preview">90-\theta_B</span><script type="math/tex">90-\theta_B</script></span>,  around the plane normal, corresponding to the diffraction vectors <span><span class="MathJax_Preview">\vec{g}</span><script type="math/tex">\vec{g}</script></span> or <span><span class="MathJax_Preview">\vec{g}'=-\vec{g}</span><script type="math/tex">\vec{g}'=-\vec{g}</script></span>. The diffrated beam with wave vectors <span><span class="MathJax_Preview">\vec{k}_g</span><script type="math/tex">\vec{k}_g</script></span> and <span><span class="MathJax_Preview">\vec{k}'_g</span><script type="math/tex">\vec{k}'_g</script></span>, which are also distributed on the cones, intersect the observation screen and form lines, as <span><span class="MathJax_Preview">\theta_B</span><script type="math/tex">\theta_B</script></span> is small. Because the inelastic scattering is more intense in the forward direction, the diffracted beam <span><span class="MathJax_Preview">\vec{k}_g</span><script type="math/tex">\vec{k}_g</script></span> gives rise to a line with a higher intensity, i.e. an excess line. On the contrary, <span><span class="MathJax_Preview">\vec{k}'_g</span><script type="math/tex">\vec{k}'_g</script></span> corresponds to a defected line.</p>
<p><img alt="" src="../images/kikuchi-lines.png" /></p>
<p>The defected and excess lines are separated by the angle <span><span class="MathJax_Preview">2\theta_B</span><script type="math/tex">2\theta_B</script></span> which in the observation plane corresponds to a distance</p>
<div>
<div class="MathJax_Preview">
r \approx L\theta_B = \frac{\lambda L}{d} 
</div>
<script type="math/tex; mode=display">
r \approx L\theta_B = \frac{\lambda L}{d} 
</script>
</div>
<p>where <span><span class="MathJax_Preview">L</span><script type="math/tex">L</script></span> is the camera length, i.e. the effective distance between the back focal plane of the objective lens and the observation screen, <span><span class="MathJax_Preview">\lambda</span><script type="math/tex">\lambda</script></span> the electron wavelength, and <span><span class="MathJax_Preview">d</span><script type="math/tex">d</script></span> the interplanar distance related to the <span><span class="MathJax_Preview">(h,k,l)</span><script type="math/tex">(h,k,l)</script></span> plane.</p>
<p>Thus, the nature of the Kikuchi bands can be determined, knowing the calibration parameter <span><span class="MathJax_Preview">L</span><script type="math/tex">L</script></span>, the electron wavelength, which depends on the acceleration voltage and the crystal structure.</p>
<h2 id="indexing-kikuchi-bands">Indexing Kikuchi bands<a class="headerlink" href="#indexing-kikuchi-bands" title="Permanent link">&para;</a></h2>
<p><span><span class="MathJax_Preview">(h,k,l)</span><script type="math/tex">(h,k,l)</script></span> bands can be retrieved, knowing the crystal structure. It can be imported from the <code>structure</code> menu. This menu can be populated by adding structures in the <code>structure.txt</code> files following the template:</p>
<div class="codehilite"><pre><span></span>Name a(A) b(A) c(A) alpha beta gamma space group
</pre></div>

<p>The space group is defined in the <code>space_group.txt</code> file and with the  <code>scattering.txt</code> file (see <a href="../diffraction/">diffraction</a> for more details).</p>
<p>Alternatively, the structure can be set by filling the <span><span class="MathJax_Preview">a,b,c</span><script type="math/tex">a,b,c</script></span>  and <span><span class="MathJax_Preview">\alpha</span><script type="math/tex">\alpha</script></span>, <span><span class="MathJax_Preview">\beta</span><script type="math/tex">\beta</script></span>, <span><span class="MathJax_Preview">\gamma</span><script type="math/tex">\gamma</script></span> fields.</p>
<h2 id="calibration">Calibration<a class="headerlink" href="#calibration" title="Permanent link">&para;</a></h2>
<p>The Kikuchi pattern needs to be calibrated on the microscope used but the calibration can be adjusted afterward. </p>
<p>The calibrations are set in the <code>calibration.txt</code> file following the scheme:</p>
<div class="codehilite"><pre><span></span>Microscope_name voltage camera length binning r.d
...
</pre></div>

<h2 id="orientation">Orientation<a class="headerlink" href="#orientation" title="Permanent link">&para;</a></h2>
<p>Orientation of the crystal can be retrieved from the analysis of the band configuration in an approach similar to the one described in <a href="../diffraction/">diffraction</a>.</p>
<p>The figure below shows the relation between the Kikuchi bands that can be defined by their normal vector <span><span class="MathJax_Preview">\vec{v}_{i}</span><script type="math/tex">\vec{v}_{i}</script></span> and their projection <span><span class="MathJax_Preview">\vec{v}_{pi}</span><script type="math/tex">\vec{v}_{pi}</script></span> in the the observation plane normal to vector <span><span class="MathJax_Preview">\vec{z}_P</span><script type="math/tex">\vec{z}_P</script></span>, i.e. the reverse of the electron beam direction.</p>
<p>From the projected vector, the normal band vector in the viewing screen coordinate system <span><span class="MathJax_Preview">(x,y,z)_P</span><script type="math/tex">(x,y,z)_P</script></span> can be deduced knowing the camera length <span><span class="MathJax_Preview">L=\|\vec{OP}\|</span><script type="math/tex">L=\|\vec{OP}\|</script></span>:</p>
<div>
<div class="MathJax_Preview">
\vec{v}_i=[x_i,y_i,z_i]^T=\vec{v}_{pi}+[0,0,\|\vec{v}_{pi}\|^2/L]^T
</div>
<script type="math/tex; mode=display">
\vec{v}_i=[x_i,y_i,z_i]^T=\vec{v}_{pi}+[0,0,\|\vec{v}_{pi}\|^2/L]^T
</script>
</div>
<p><img alt="" src="../images/kikuchi-orientation.png" /></p>
<p>Considering N bands, the orientation can be defined by: </p>
<div>
<div class="MathJax_Preview">
G_c A=G_s
</div>
<script type="math/tex; mode=display">
G_c A=G_s
</script>
</div>
<p>with</p>
<div>
<div class="MathJax_Preview">
G_c=D^\ast \begin{pmatrix} 
h_1 &amp; k_1 &amp; l_1\\
&amp; ... &amp; \\
h_N &amp; k_N &amp; l_N     
\end{pmatrix}
</div>
<script type="math/tex; mode=display">
G_c=D^\ast \begin{pmatrix} 
h_1 & k_1 & l_1\\
& ... & \\
h_N & k_N & l_N     
\end{pmatrix}
</script>
</div>
<p>the g-vectors in the crystal coordinates and
<span><span class="MathJax_Preview">D^\ast</span><script type="math/tex">D^\ast</script></span> is defined <a href="../stereoproj/#setting-up-the-crystal">here</a>, and: </p>
<div>
<div class="MathJax_Preview"> 
G_s=\begin{pmatrix} 
x_1 &amp; y_1 &amp; z_1\\
&amp; ... &amp; \\
x_N &amp; y_N &amp; z_N     
\end{pmatrix}
</div>
<script type="math/tex; mode=display"> 
G_s=\begin{pmatrix} 
x_1 & y_1 & z_1\\
& ... & \\
x_N & y_N & z_N     
\end{pmatrix}
</script>
</div>
<p>As the above equation defines the crystal orientation, <span><span class="MathJax_Preview">A</span><script type="math/tex">A</script></span> should be a rotation matrix. The closest Euler rotation matrix <span><span class="MathJax_Preview">R</span><script type="math/tex">R</script></span> can be found with the approach proposed by Mackenzie using singular value decomposition:</p>
<div>
<div class="MathJax_Preview">
U,S,V^T=svd(G_c^TG_s) \\
R=V U^T
</div>
<script type="math/tex; mode=display">
U,S,V^T=svd(G_c^TG_s) \\
R=V U^T
</script>
</div>
<p>The Euler angles are retrieved from the <span><span class="MathJax_Preview">R</span><script type="math/tex">R</script></span> matrix:</p>
<div>
<div class="MathJax_Preview">
\varphi_1 = \arctan (R_{02}, R_{12}) \\
\phi = \arccos(R_{22}) \\
\varphi_2 = \arctan (R_{20},R_{21})
</div>
<script type="math/tex; mode=display">
\varphi_1 = \arctan (R_{02}, R_{12}) \\
\phi = \arccos(R_{22}) \\
\varphi_2 = \arctan (R_{20},R_{21})
</script>
</div>
<p>In <a href="../diffraction/">diffraction</a>, the g-vectors in crystal coordinates are determined step by step by calculating the angles between the vectors, and letting the user to choose. 
Kikuchi bands usually have higher indices so that it is more difficult to guess the right indices. 
Here we choose to compare the relative measured angles of g-vectors <span><span class="MathJax_Preview">\theta_{ij}=\angle{(\vec{g}_i,\vec{g}_j)}</span><script type="math/tex">\theta_{ij}=\angle{(\vec{g}_i,\vec{g}_j)}</script></span> with a lookup table compiling the angles <span><span class="MathJax_Preview">\theta'_{ij}=\angle{((h_i,k_i,l_i),(h_j,k_j,l_j))}</span><script type="math/tex">\theta'_{ij}=\angle{((h_i,k_i,l_i),(h_j,k_j,l_j))}</script></span>. A consistent set of  g-vectors is obtained if all the angles difference <span><span class="MathJax_Preview">\left|\theta_{ij}-\theta'_{ij}\right|</span><script type="math/tex">\left|\theta_{ij}-\theta'_{ij}\right|</script></span> is less than a tolerance angle <span><span class="MathJax_Preview">\epsilon</span><script type="math/tex">\epsilon</script></span> that can be chosen.  </p>
<h2 id="interface">Interface<a class="headerlink" href="#interface" title="Permanent link">&para;</a></h2>
<p>The interface is composed of  a top bar menu, a plotting area to display Kikuchi pattern and a setting/results panel.</p>
<p><img alt="" src="../images/kikuchi-interface.png" /></p>
<h2 id="procedure">Procedure<a class="headerlink" href="#procedure" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>Enter the crystal structure and space group.</p>
</li>
<li>
<p>Select the maximum indices for band identification.</p>
</li>
<li>
<p>Enter the microscope calibration.</p>
</li>
<li>
<p>Open a pattern.</p>
</li>
<li>
<p>Click on the pattern center and press <code>Add center</code>. Position of the center appears in the box.</p>
</li>
<li>
<p>To highlight the bands, the <code>brightness</code> can be adjusted.</p>
</li>
<li>
<p>Select a band by clicking three times. The first two points define the direction along one line. The third point should be on the second parallel line. Then, both the d-spacing and the projected g-vector can be retrieved. A better accuracy can be achieved if the direction is measured with two extreme points along the line. Zooming in the pattern can also be helpful.</p>
</li>
<li>
<p>Press <code>Add bands</code>. The band number and the corresponding (projected) d-spacing dp (in px) appears in the <strong>Bands</strong> box. Bands can be removed by pressing the <code>Remove band</code> button.</p>
</li>
<li>
<p>Clear the points and view (if zoomed in) with the <code>Reset points</code> and <code>Reset view</code> buttons.</p>
</li>
<li>
<p>Repeat the operation at least twice and no more than 6 times (2 to 6 bands to identify). </p>
</li>
<li>
<p>Choose a tolerance angle <span><span class="MathJax_Preview">\epsilon</span><script type="math/tex">\epsilon</script></span> less than 3 degrees. 1 by default.</p>
</li>
<li>
<p>Plot the bands to verify the measured bands.</p>
</li>
<li>
<p>Press the <code>Run</code> button to display solutions in the <strong>Results</strong> box. If no solutions, remove the bands and try a more accurate point and click and/or increase the tolerance angle.</p>
</li>
<li>
<p>By selecting the different sets of data and by clicking on the <code>Show bands</code> button, the theoretical bands are plotted in overlay. The results are shown according the scheme:</p>
</li>
</ul>
<div class="codehilite"><pre><span></span>g: [h1,k1,l1],....,[hN,kN,lN]
Euler angles phi1, phi, phi2
dev_angle, dev_width
...
</pre></div>

<p>The <code>dev_angle</code> value corresponds to the mean misorientation: </p>
<div>
<div class="MathJax_Preview">
\langle \Delta \theta \rangle = \frac{1}{N}{\sum_i^N \left| \arccos(R \vec{g}_{h_i k_i l_i} \cdot [x_i,y_i,z_i]^T) \right |}
</div>
<script type="math/tex; mode=display">
\langle \Delta \theta \rangle = \frac{1}{N}{\sum_i^N \left| \arccos(R \vec{g}_{h_i k_i l_i} \cdot [x_i,y_i,z_i]^T) \right |}
</script>
</div>
<p>The <code>dev_width</code> value corresponds to the mean deviation on the d spacing values (in percents).</p>
<div>
<div class="MathJax_Preview">
\langle \Delta d \rangle= \frac{1}{N} {\sum_i^N  \frac{\left|d_{h_i k_i l_i} - d_i \right|}{d_{h_i k_i l_i}} }
</div>
<script type="math/tex; mode=display">
\langle \Delta d \rangle= \frac{1}{N} {\sum_i^N  \frac{\left|d_{h_i k_i l_i} - d_i \right|}{d_{h_i k_i l_i}} }
</script>
</div>
<p><img alt="" src="../images/kikuchi-procedure.png" /></p>
<p>These two values should be as minimum as possible. Usually a good fit can be obtained with <span><span class="MathJax_Preview">\langle \Delta \theta \rangle</span><script type="math/tex">\langle \Delta \theta \rangle</script></span> of the order of 0.2 degrees and <span><span class="MathJax_Preview">\langle \Delta d \rangle</span><script type="math/tex">\langle \Delta d \rangle</script></span> of the order of few percents.</p>
<h2 id="refining-the-results">Refining the results<a class="headerlink" href="#refining-the-results" title="Permanent link">&para;</a></h2>
<p>Refining the results can be made from the <code>Refine</code> menu:</p>
<ul>
<li>
<p>Manual rotations along <span><span class="MathJax_Preview">x</span><script type="math/tex">x</script></span>, <span><span class="MathJax_Preview">y</span><script type="math/tex">y</script></span> and <span><span class="MathJax_Preview">z</span><script type="math/tex">z</script></span> axes can be performed to judge the qualitative agreement between the pattern and the theoretical lines.</p>
</li>
<li>
<p>The calibration and acceleration voltage can also be adjusted. By clicking the <code>update</code> button, the solutions are re-calculated using the new sets of values. A better fit can be judged by inspecting how <span><span class="MathJax_Preview">\langle \Delta \theta \rangle</span><script type="math/tex">\langle \Delta \theta \rangle</script></span> and <span><span class="MathJax_Preview">\langle \Delta d \rangle</span><script type="math/tex">\langle \Delta d \rangle</script></span> are minimized.</p>
</li>
<li>
<p>The updated Euler angles can be read at the bottom of the refine window.</p>
</li>
</ul>
<p><img alt="" src="../images/kikuchi-refine.png" /></p>
<h2 id="tilt-conditions">Tilt conditions<a class="headerlink" href="#tilt-conditions" title="Permanent link">&para;</a></h2>
<p>By default the orientation determined corresponds to the situation of the holder at zero tilt the Euler angle being given in the <span><span class="MathJax_Preview">(x,y,z)_P</span><script type="math/tex">(x,y,z)_P</script></span> coordinate system. To retrieve the Euler angle at zero tilt from a tilted sample, the <span><span class="MathJax_Preview">\alpha</span><script type="math/tex">\alpha</script></span>, <span><span class="MathJax_Preview">\beta</span><script type="math/tex">\beta</script></span>, <span><span class="MathJax_Preview">\theta</span><script type="math/tex">\theta</script></span> tilt angles and the angle <span><span class="MathJax_Preview">\xi</span><script type="math/tex">\xi</script></span> between the <span><span class="MathJax_Preview">\alpha</span><script type="math/tex">\alpha</script></span>-tilt axis and the y-axis should be indicated as the Euler rotation matrix at zero tilt <span><span class="MathJax_Preview">R_0</span><script type="math/tex">R_0</script></span> is deduced from the rotation matrix <span><span class="MathJax_Preview">R_t</span><script type="math/tex">R_t</script></span> obtained by the relation:</p>
<div>
<div class="MathJax_Preview">
R_0=R_x(-\beta)R_y(-\alpha)R_z(\xi)R_t
</div>
<script type="math/tex; mode=display">
R_0=R_x(-\beta)R_y(-\alpha)R_z(\xi)R_t
</script>
</div>
<ul>
<li>Fill the filed in the Tilt conditions window accessed from the <code>Tool</code></li>
<li>Press <code>Run</code> in the main window or <code>Update</code> in the Refine window to update the Euler angles.</li>
</ul>
<p><img alt="" src="../images/kikuchi-tilt.png" /></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Contact  &nbsp <A HREF="mailto:mompiou@cemes.fr"><img src="https://mompiou.github.io/pycotem/images/envelope.png"  ></A>
          </div>
        
        powered by
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.c648116f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>